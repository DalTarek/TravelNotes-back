{"version":3,"file":"application.module.js","sourceRoot":"","sources":["../src/application.module.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,yCAAqF;AACrF,6CAA+D;AAE/D,2CAAgE;AAChE,yCAA0C;AAC1C,6CAAwC;AACxC,8CAA6C;AAC7C,yCAAmE;AACnE,8CAA2E;AAC3E,gDAA4D;AAC5D,8CAA0D;AAC1D,oDAA6D;AAE7D,MAAM,6BAA6B,GAAG,CAAC,kBAAsC,EAAE,EAAE,CAAC,IAAI,iCAAsB,CAAC,kBAAkB,CAAC,CAAC;AAuBjI,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAC1B;;;;;OAKG;IACH,YAAoB,WAA8B,EAAU,OAAsB;QAA9D,gBAAW,GAAX,WAAW,CAAmB;QAAU,YAAO,GAAP,OAAO,CAAe;IAClF,CAAC;IAED;;;;OAIG;IACH,OAAO;QACH,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gDAAgD,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;IAC9G,CAAC;IAED;;;;;;;OAOG;IACH,OAAO,CAAC,KAAY,EAAE,IAAU;QAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,oDAAoD,CAAC,CAAC;IAC7E,CAAC;CACJ,CAAA;AA9BY,iBAAiB;IArB7B,qBAAc,CAAC;QACZ,OAAO,EAAE,OAAO;QAChB,OAAO,EAAE;YACL,qBAAY;YACZ,iBAAU,CAAC,SAAS,CAAC,eAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACxC,mBAAW;SACd;QACD,YAAY,EAAE;YACV,wBAAkB;YAClB,uBAAiB;YACjB,4BAAqB;YACrB,0BAAoB;YACpB,6BAAoB;YACpB,qBAAW;SACd;QACD,SAAS,EAAE;YACP,wBAAiB;YACjB,yBAAc;YACd,EAAE,OAAO,EAAE,iCAAsB,EAAE,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE,CAAE,0BAAkB,CAAE,EAAC;SAC9G;KACJ,CAAC;qCAQmC,wBAAiB,EAAmB,sBAAa;GAPzE,iBAAiB,CA8B7B;AA9BY,8CAAiB","sourcesContent":["import { HapinessModule, HttpServerService, OnError, OnStart } from '@hapiness/core';\nimport { LoggerModule, LoggerService } from '@hapiness/logger';\nimport { Observable } from 'rxjs';\nimport {MongoClientService, MongoModule} from '@hapiness/mongo';\nimport {SwagModule} from '@hapiness/swag';\nimport {Config} from '@hapiness/config';\nimport {TravelModel} from './models/travels';\nimport { TravelsDocumentService, TravelsService} from './services';\nimport {GetAllTravelsRoute, GetOneTravelRoute} from './routes/travels/get';\nimport {PostCreateTravelRoute} from './routes/travels/post';\nimport {PutUpdateTravelRoute} from './routes/travels/put';\nimport {DeleteOneTravelRoute} from './routes/travels/delete';\n\nconst travelsDocumentServiceFactory = (mongoClientService: MongoClientService) => new TravelsDocumentService(mongoClientService);\n\n@HapinessModule({\n    version: '1.0.0',\n    imports: [\n        LoggerModule,\n        SwagModule.setConfig(Config.get('swag')),\n        MongoModule\n    ],\n    declarations: [\n        GetAllTravelsRoute,\n        GetOneTravelRoute,\n        PostCreateTravelRoute,\n        PutUpdateTravelRoute,\n        DeleteOneTravelRoute,\n        TravelModel\n    ],\n    providers: [\n        HttpServerService,\n        TravelsService,\n        { provide: TravelsDocumentService, useFactory: travelsDocumentServiceFactory, deps: [ MongoClientService ]}\n    ]\n})\nexport class ApplicationModule implements OnStart, OnError {\n    /**\n     * Class constructor\n     *\n     * @param _httpServer\n     * @param {LoggerService} _logger\n     */\n    constructor(private _httpServer: HttpServerService, private _logger: LoggerService) {\n    }\n\n    /**\n     * On start process\n     *\n     * @return {void | Observable<any>}\n     */\n    onStart(): void | Observable<any> {\n        this._logger.info(`< Application.bootstrap > Server started at: ${this._httpServer.instance().info.uri}`);\n    }\n\n    /**\n     * On error process\n     *\n     * @param {Error} error\n     * @param data\n     *\n     * @return {void | Observable<any>}\n     */\n    onError(error: Error, data?: any): void | Observable<any> {\n        this._logger.error('A problem occurred during application\\'s lifecycle');\n    }\n}\n"]}